#!/usr/bin/env bash

set -euo pipefail

# A FIFO pipe file (not a regular file)
QUEUE=$HOME/.cache/notification-queue

# ---

basedir=$(dirname "$QUEUE")

[[ ! -d "$basedir" ]] && mkdir -p "$basedir"
[[ ! -e $QUEUE ]]     && mkfifo $QUEUE

while [[ -e "$QUEUE" ]]; do
  while read line; do
    notify-send "[Notification queue]" "$line"
    sleep 10
  done < $QUEUE
done
